<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="wesker&#39;s blog" />
       
      <meta name="description" content="wesker&#39;s blog" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Redis |  wesker&#39;s blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/wei.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="wesker's blog" type="application/atom+xml">
</head>
  </html>
</html>




<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Redis"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Redis
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/06/23/Redis/" class="article-date">
  <time datetime="2022-06-23T04:54:14.000Z" itemprop="datePublished">2022-06-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">5.5k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">27 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Redis入门"><a href="#Redis入门" class="headerlink" title="Redis入门"></a>Redis入门</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>Redis是什么</p>
</blockquote>
<p>Redis（Remote Dictionary Server )，即==远程字典服务==，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦==可持久化==的日志型、Key-Value数据库，并提供多种语言的API。也被人们称之为结构化数据库</p>
<p>—来自<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Redis">百度百科</a></p>
<blockquote>
<p>Redis能干嘛</p>
</blockquote>
<p>1、内存存储、持久化（rdb，aof）</p>
<p>2、效率高，可以用于告诉缓存</p>
<p>3、发布订阅系统</p>
<p>4、地图信息分析</p>
<p>5、计时器、计数器（浏览量）</p>
<p>6、。。。</p>
<blockquote>
<p>特性</p>
</blockquote>
<p>1、多样的数据类型</p>
<p>2、持久化</p>
<p>3、集群</p>
<p>4、事物</p>
<blockquote>
<p>学习Redis需要的东西</p>
</blockquote>
<p>1、狂神公众号</p>
<p>2、官网：<a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io/</a></p>
<p>3、中文网：<a target="_blank" rel="noopener" href="http://www.redis.cn/">http://www.redis.cn/</a></p>
<h2 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h2><p>1、下载安装包</p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoftarchive/redis/releases">https://github.com/microsoftarchive/redis/releases</a></p>
<p><img src="/2022/06/23/Redis/image-20220625205058175.png" alt="image-20220625205058175"></p>
<p>2、解压</p>
<p><img src="/2022/06/23/Redis/image-20220625205150113.png" alt="image-20220625205150113"></p>
<p>3、开启Redis，双击redis-server.exe即可</p>
<p><img src="/2022/06/23/Redis/image-20220625205407530.png" alt="image-20220625205407530"></p>
<p>4、使用客户端连接Redis</p>
<p><img src="/2022/06/23/Redis/image-20220625205546630.png" alt="image-20220625205546630"></p>
<p>测试连接：</p>
<p><img src="/2022/06/23/Redis/image-20220625210004502.png" alt="image-20220625210004502"></p>
<p>windows下使用很简单，但是Redis建议使用Linux来使用—-来自<a target="_blank" rel="noopener" href="http://www.redis.cn/topics/introduction">Redis介绍</a></p>
<p><img src="/2022/06/23/Redis/image-20220625210347560.png" alt="image-20220625210347560"></p>
<h2 id="Linux安装"><a href="#Linux安装" class="headerlink" title="Linux安装"></a>Linux安装</h2><p>1、下载安装包<a target="_blank" rel="noopener" href="https://download.redis.io/releases/">https://download.redis.io/releases/</a></p>
<p>2、解压Redis安装包，一般放到opt目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost opt]# tar -zxvf redis-5.0.8.tar.gz <br><br>[root@localhost opt]# ls<br>redis-5.0.8  redis-5.0.8.tar.gz<br></code></pre></td></tr></table></figure>

<p>3、进入解压后的文件</p>
<p><img src="/2022/06/23/Redis/image-20220625213922391.png" alt="image-20220625213922391"></p>
<p>4、安装基本环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost redis-5.0.8]# yum install gcc c++<br><br>make<br><br>make install<br></code></pre></td></tr></table></figure>

<p>5、Redis默认安装路径<code>/usr/local/bin</code></p>
<p><img src="/2022/06/23/Redis/image-20220625215239887.png" alt="image-20220625215239887"></p>
<p>6、将Redis配置文件复制到当前目录下</p>
<p><img src="/2022/06/23/Redis/image-20220625221034083.png" alt="image-20220625221034083"></p>
<p>7、Redis默认不是后台启动，我们需要配置conf文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost bin]# vim wconfig/redis.conf <br></code></pre></td></tr></table></figure>

<p><img src="/2022/06/23/Redis/image-20220625221327016.png" alt="image-20220625221327016"></p>
<p>8、启动服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost bin]# redis-server wconfig/redis.conf <br></code></pre></td></tr></table></figure>

<p><img src="/2022/06/23/Redis/image-20220625221703754.png" alt="image-20220625221703754"></p>
<p>9、启动客户端，连接服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost bin]# redis-cli -p 6379			#6379<br>127.0.0.1:6379&gt; ping		#测试<br>PONG<br>127.0.0.1:6379&gt; set name wesker<br>OK<br>127.0.0.1:6379&gt; get name<br>&quot;wesker&quot;<br>127.0.0.1:6379&gt; keys *		#查看所有的key<br>1) &quot;name&quot;<br></code></pre></td></tr></table></figure>

<p>10、查看Redis的进程是否开启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SHELL">[root@localhost bin]# ps -ef|grep redis<br>root      16171      1  0 22:16 ?        00:00:07 redis-server 127.0.0.1:6379<br>root      16422   2345  0 22:32 pts/0    00:00:00 redis-cli -p 6379<br>root      16603  16554  0 22:44 pts/1    00:00:00 grep --color=auto redis<br></code></pre></td></tr></table></figure>

<p>11、如何关闭Redis服务？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; shutdown	#关闭Redis<br>not connected&gt; exit			#退出<br>[root@localhost bin]# ps -ef|grep redis		#再次查看进程<br>root      16636  16554  0 22:47 pts/1    00:00:00 grep --color=auto redis<br>[root@localhost bin]# <br></code></pre></td></tr></table></figure>

<h2 id="测试性能"><a href="#测试性能" class="headerlink" title="测试性能"></a>测试性能</h2><p><strong>redis-benchmark</strong></p>
<p>官方自带的性能测试参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost bin]# ll<br>总用量 32776<br>-rw-r--r-- 1 root root     110 6月  25 22:46 dump.rdb<br>-rwxr-xr-x 1 root root 4366856 6月  25 22:05 redis-benchmark<br>-rwxr-xr-x 1 root root 8125048 6月  25 22:05 redis-check-aof<br>-rwxr-xr-x 1 root root 8125048 6月  25 22:05 redis-check-rdb<br>-rwxr-xr-x 1 root root 4807840 6月  25 22:05 redis-cli<br>lrwxrwxrwx 1 root root      12 6月  25 22:05 redis-sentinel -&gt; redis-server<br>-rwxr-xr-x 1 root root 8125048 6月  25 22:05 redis-server<br>drwxr-xr-x 2 root root      24 6月  25 22:13 wconfig<br></code></pre></td></tr></table></figure>

<p>性能测试可选参数如下：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>选项</th>
<th>描述</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>-h</strong></td>
<td>指定服务器主机名</td>
<td>127.0.0.1</td>
</tr>
<tr>
<td>2</td>
<td><strong>-p</strong></td>
<td>指定服务器端口</td>
<td>6379</td>
</tr>
<tr>
<td>3</td>
<td><strong>-s</strong></td>
<td>指定服务器 socket</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td><strong>-c</strong></td>
<td>指定并发连接数</td>
<td>50</td>
</tr>
<tr>
<td>5</td>
<td><strong>-n</strong></td>
<td>指定请求数</td>
<td>10000</td>
</tr>
<tr>
<td>6</td>
<td><strong>-d</strong></td>
<td>以字节的形式指定 SET/GET 值的数据大小</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td><strong>-k</strong></td>
<td>1=keep alive 0=reconnect</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td><strong>-r</strong></td>
<td>SET/GET/INCR 使用随机 key, SADD 使用随机值</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td><strong>-P</strong></td>
<td>通过管道传输 <numreq> 请求</numreq></td>
<td>1</td>
</tr>
<tr>
<td>10</td>
<td><strong>-q</strong></td>
<td>强制退出 redis。仅显示 query/sec 值</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td><strong>–csv</strong></td>
<td>以 CSV 格式输出</td>
<td></td>
</tr>
<tr>
<td>12</td>
<td>***-l*（L 的小写字母）**</td>
<td>生成循环，永久执行测试</td>
<td></td>
</tr>
<tr>
<td>13</td>
<td><strong>-t</strong></td>
<td>仅运行以逗号分隔的测试命令列表。</td>
<td></td>
</tr>
<tr>
<td>14</td>
<td>***-I*（i 的大写字母）**</td>
<td>Idle 模式。仅打开 N 个 idle 连接并等待。</td>
<td></td>
</tr>
</tbody></table>
<p>​                                                                        —–来自<a target="_blank" rel="noopener" href="https://www.runoob.com/redis/redis-benchmarks.html">菜鸟教程</a></p>
<p><strong>测试</strong></p>
<p>100个并发，10000个请求（默认是50个并发，10000个请求）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost bin]# redis-benchmark -h localhost -p 6379 -c 100  -n 100000<br></code></pre></td></tr></table></figure>

<p><img src="/2022/06/23/Redis/image-20220626134400163.png" alt="image-20220626134400163"></p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>Redis默认有16个数据库</p>
<p><img src="/2022/06/23/Redis/image-20220626134755958.png" alt="image-20220626134755958"></p>
<p>默认使用的是第0个数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; select 3		#选择第三个数据库<br>OK<br>127.0.0.1:6379[3]&gt; dbsize			#查看当前数据库大小<br>(integer) 0<br>127.0.0.1:6379[3]&gt; set name wei		<br>OK<br>127.0.0.1:6379[3]&gt; select 5<br>OK<br>127.0.0.1:6379[5]&gt; get name<br>(nil)<br>127.0.0.1:6379[5]&gt; select 3<br>OK<br>127.0.0.1:6379[3]&gt; get name<br>&quot;wei&quot;<br>127.0.0.1:6379[3]&gt; dbsize<br>(integer) 1<br>127.0.0.1:6379[3]&gt; keys *		#查看当前数据库所有的key<br>1) &quot;name&quot;<br>127.0.0.1:6379[3]&gt; flushdb		#清空当前数据库<br>OK<br>127.0.0.1:6379[3]&gt; keys *<br>(empty list or set)<br>127.0.0.1:6379[3]&gt; select 0		#切换0号数据库<br>OK<br>127.0.0.1:6379&gt; set name wesker		#设置name为wesker<br>OK<br>127.0.0.1:6379&gt; keys *		#查看当前数据库所有的key<br>1) &quot;name&quot;<br>127.0.0.1:6379&gt; select 3 	#切换回3号数据库<br>OK<br>127.0.0.1:6379[3]&gt; flushall		#执行flush命令（清空所有数据库）<br>OK<br>127.0.0.1:6379[3]&gt; select 0		#切换回0号数据库<br>OK<br>127.0.0.1:6379&gt; keys *		#查看所有的key<br>(empty list or set)		#显示为空<br>127.0.0.1:6379&gt; <br></code></pre></td></tr></table></figure>

<p>为什么端口号是6379？明星名字九宫格对应的数字6379</p>
<blockquote>
<p>Redis是单线程的</p>
</blockquote>
<p>Redis很快的，基于内存操作，CPU不是Redis的性能瓶颈，而是机器的内存和带宽，既然能够使用单线程来实现所以就是用了单线程</p>
<p><strong>Redis单线程为什么这么快？</strong></p>
<p> 1、误区1：高性能的服务器一定是多线程的</p>
<p>2、误区2：多线程（CPU上下文会切换，耗时间）一定必单线程效率高</p>
<p>核心：Redis是将所有的数据放在内存中的，所以说使用单线程操作效率就是最高的，对于内存系统来说，如果没有上下文切换效率就是最高的，多次读写都是在一个CPU上的，在内存情况下，这个方案就是最佳的</p>
<h1 id="五大数据类型"><a href="#五大数据类型" class="headerlink" title="五大数据类型"></a>五大数据类型</h1><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings）， 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和 地理空间（geospatial） 索引半径查询。 Redis 内置了 复制（replication），LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction），事务（transactions） 和不同级别的 磁盘持久化（persistence）， 并通过 Redis哨兵（Sentinel）和自动 分区（Cluster）提供高可用性（high availability）。 </p>
<h2 id="Redis-key"><a href="#Redis-key" class="headerlink" title="Redis-key"></a>Redis-key</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; set name wesker				#设置name 值为wesker<br>OK<br>127.0.0.1:6379&gt; set age 18					#设置age 值为18<br>OK<br>127.0.0.1:6379&gt; keys *						#查询所有的key<br>1) &quot;age&quot;<br>2) &quot;name&quot;<br><br>127.0.0.1:6379&gt; move age 1					#移除一个指定的key<br>(integer) 1<br>127.0.0.1:6379&gt; keys *				<br>1) &quot;name&quot;<br>127.0.0.1:6379&gt; EXISTS name					#查询是否存在指定的key<br>(integer) 1									#返回1表示存在<br>127.0.0.1:6379&gt; EXISTS name1<br>(integer) 0									#返回0便是不存在<br>127.0.0.1:6379&gt; EXPIRE name 10				#设置指定的key的过期时间，单位为秒<br>(integer) 1<br>127.0.0.1:6379&gt; TTL name					#查看指定key的剩余时间<br>(integer) -2								#负数代表已经过期<br>127.0.0.1:6379&gt; keys *<br>(empty list or set)<br>127.0.0.1:6379&gt; set name wesker<br>OK<br>127.0.0.1:6379&gt; TYPE name					#查看指定键的类型<br>string<br>127.0.0.1:6379&gt; <br></code></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>String(字符串)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs bash">127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> k1 hello				<span class="hljs-comment">#设置键值对，key为k1,value为hello</span><br>OK<br>127.0.0.1:6379&gt; KEYS *						<span class="hljs-comment">#查看所有的key</span><br>1) <span class="hljs-string">&quot;k1&quot;</span><br>127.0.0.1:6379&gt; get k1						<span class="hljs-comment">#通过指定的key获取value</span><br><span class="hljs-string">&quot;hello&quot;</span><br>127.0.0.1:6379&gt; EXISTS k1					<span class="hljs-comment">#查询指定的key是否存在</span><br>(<span class="hljs-built_in">integer</span>) 1<br>127.0.0.1:6379&gt; APPEND k1 <span class="hljs-string">&quot;,hello&quot;</span>			<span class="hljs-comment">#通过指定的key在value后追加内容，返回字符串长度</span><br>(<span class="hljs-built_in">integer</span>) 11<br>127.0.0.1:6379&gt; get k1<br><span class="hljs-string">&quot;hello,hello&quot;</span><br>127.0.0.1:6379&gt; STRLEN k1					<span class="hljs-comment">#查询指定key的value的长度</span><br>(<span class="hljs-built_in">integer</span>) 11<br>127.0.0.1:6379&gt; APPEND k1 <span class="hljs-string">&quot;,world&quot;</span><br>(<span class="hljs-built_in">integer</span>) 17<br>127.0.0.1:6379&gt; get k1<br><span class="hljs-string">&quot;hello,hello,world&quot;</span><br>127.0.0.1:6379&gt; KEYS *<br>1) <span class="hljs-string">&quot;k1&quot;</span><br>127.0.0.1:6379&gt; APPEND k2 <span class="hljs-string">&quot;hello world&quot;</span>		<span class="hljs-comment">#如果不存在指定的key，则相当于set</span><br>(<span class="hljs-built_in">integer</span>) 11<br>127.0.0.1:6379&gt; keys *<br>1) <span class="hljs-string">&quot;k2&quot;</span><br>2) <span class="hljs-string">&quot;k1&quot;</span><br>127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> views 0					<span class="hljs-comment">#创建views</span><br>OK<br>127.0.0.1:6379&gt; TYPE views					<span class="hljs-comment">#查看类型</span><br>string<br>127.0.0.1:6379&gt; incr views					<span class="hljs-comment">#执行一次自增1，类似i++</span><br>(<span class="hljs-built_in">integer</span>) 1<br>127.0.0.1:6379&gt; incr views<br>(<span class="hljs-built_in">integer</span>) 2<br>127.0.0.1:6379&gt; incr views<br>(<span class="hljs-built_in">integer</span>) 3<br>127.0.0.1:6379&gt; decr views					<span class="hljs-comment">#执行一次自减1</span><br>(<span class="hljs-built_in">integer</span>) 3<br>127.0.0.1:6379&gt; decr views<br>(<span class="hljs-built_in">integer</span>) 2<br>127.0.0.1:6379&gt; decr views<br>(<span class="hljs-built_in">integer</span>) 1<br>127.0.0.1:6379&gt; INCRBY views 10				<span class="hljs-comment">#自增，步长为10</span><br>(<span class="hljs-built_in">integer</span>) 10<br>127.0.0.1:6379&gt; INCRBY views 10<br>(<span class="hljs-built_in">integer</span>) 20<br>127.0.0.1:6379&gt; DECRBY views 5				<span class="hljs-comment">#自减，步长为5</span><br>(<span class="hljs-built_in">integer</span>) 15<br>127.0.0.1:6379&gt; DECRBY views 5<br>(<span class="hljs-built_in">integer</span>) 10<br><br><br>127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> key1 <span class="hljs-string">&quot;hello,wesker&quot;</span>		<br>OK<br>127.0.0.1:6379&gt; get key1<br><span class="hljs-string">&quot;hello,wesker&quot;</span><br>127.0.0.1:6379&gt; GETRANGE key1 0 5			<span class="hljs-comment">#截取第0个到第5个字符的字符串[0,5]</span><br><span class="hljs-string">&quot;hello,&quot;</span><br>127.0.0.1:6379&gt; GETRANGE key1 0 -1			<span class="hljs-comment">#获取所有字符串</span><br><span class="hljs-string">&quot;hello,wesker&quot;</span><br><br><br>127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> key2 abcdef<br>OK<br>127.0.0.1:6379&gt; get key2<br><span class="hljs-string">&quot;abcdef&quot;</span><br>127.0.0.1:6379&gt; SETRANGE key2 1 xx			<span class="hljs-comment">#将第1个字符的位置换位xx</span><br>(<span class="hljs-built_in">integer</span>) 6<br>127.0.0.1:6379&gt; get key2<br><span class="hljs-string">&quot;axxdef&quot;</span><br><br><span class="hljs-comment">#setex(set with expire)  设置过期时间</span><br><span class="hljs-comment">#setnx(set if not exist) 如果不存在再设置</span><br>127.0.0.1:6379&gt; setex key3 30 wesker		<span class="hljs-comment">#设置过期时间30秒</span><br>OK<br>127.0.0.1:6379&gt; ttl key3					<span class="hljs-comment">#查看剩余时间</span><br>(<span class="hljs-built_in">integer</span>) 17<br>127.0.0.1:6379&gt; setnx key4 <span class="hljs-string">&quot;radis&quot;</span>			<span class="hljs-comment">#如果不存在该key，则设置</span><br>(<span class="hljs-built_in">integer</span>) 1<br>127.0.0.1:6379&gt; get key4<br><span class="hljs-string">&quot;radis&quot;</span><br>127.0.0.1:6379&gt; setnx key4 <span class="hljs-string">&quot;mongoDB&quot;</span>		<span class="hljs-comment">#已存在该key，返回值是0</span><br>(<span class="hljs-built_in">integer</span>) 0<br><br><br><br>127.0.0.1:6379&gt; mset k1 v1 k2 v2 k3 v3      <span class="hljs-comment">#一次性设置多个键值对</span><br>OK<br>127.0.0.1:6379&gt; keys *<br>1) <span class="hljs-string">&quot;k2&quot;</span><br>2) <span class="hljs-string">&quot;k3&quot;</span><br>3) <span class="hljs-string">&quot;k1&quot;</span><br>127.0.0.1:6379&gt; get k2<br><span class="hljs-string">&quot;v2&quot;</span><br>127.0.0.1:6379&gt; mget k1 k2 					<span class="hljs-comment">#一次性根据多个key获取value</span><br>1) <span class="hljs-string">&quot;v1&quot;</span><br>2) <span class="hljs-string">&quot;v2&quot;</span><br>127.0.0.1:6379&gt; msetnx k1 v1 k4 v4			<span class="hljs-comment">#如果不存在再创建</span><br>(<span class="hljs-built_in">integer</span>) 0<br>127.0.0.1:6379&gt; get k4<br>(nil)<br><br><br><span class="hljs-comment">#创建对象</span><br>127.0.0.1:6379&gt; <span class="hljs-built_in">set</span> user:1 &#123;name:wesker,age:18&#125; <span class="hljs-comment">#设置键值对，key为user：1，value为JSON字符串，值为&#123;name:wesker,age:18&#125;</span><br><br><br>127.0.0.1:6379&gt; mset user:1:name wesker user:1:age 22<br>OK<br>127.0.0.1:6379&gt; mget user:1:name<br>1) <span class="hljs-string">&quot;wesker&quot;</span><br><br><br>127.0.0.1:6379&gt; getset k1 redis				<span class="hljs-comment">#先获取原来的值，再设置新的值，如果没有则返回nil</span><br>(nil)<br>127.0.0.1:6379&gt; getset k1 mongoDB<br><span class="hljs-string">&quot;redis&quot;</span><br>127.0.0.1:6379&gt; get k1<br><span class="hljs-string">&quot;mongoDB&quot;</span><br><br></code></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>在Redis里面，可以把list玩成栈，队列、阻塞队列</p>
<p>list所有的命令都是以l开头的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; LPUSH list one			#将一个值或者多个值放在列表头部（左边）<br>(integer) 1<br>127.0.0.1:6379&gt; LPUSH list two<br>(integer) 2<br>127.0.0.1:6379&gt; LPUSH list three<br>(integer) 3<br>127.0.0.1:6379&gt; LRANGE list 0 -1		#根据区间获取list中具体的值<br>1) &quot;three&quot;<br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>127.0.0.1:6379&gt; LRANGE list 0 1			#倒着存的<br>1) &quot;three&quot;<br>2) &quot;two&quot;<br><br><br>127.0.0.1:6379&gt; RPUSH list right		#将一个值或者多个值放在列表尾部部（右边）<br>(integer) 4<br>127.0.0.1:6379&gt; keys *<br>1) &quot;list&quot;<br>127.0.0.1:6379&gt; get list<br>(error) WRONGTYPE Operation against a key holding the wrong kind of value<br>127.0.0.1:6379&gt; LRANGE list<br>(error) ERR wrong number of arguments for &#x27;lrange&#x27; command<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;two&quot;<br>3) &quot;one&quot;<br>4) &quot;right&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">删除元素</span><br>127.0.0.1:6379&gt; lpop list		#删除左边一个元素<br>&quot;three&quot;<br>127.0.0.1:6379&gt; rpop list		#删除右边一个元素<br>&quot;right&quot;<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;two&quot;<br>2) &quot;one&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">根据下标获取元素</span><br>127.0.0.1:6379&gt; lindex list 0<br>&quot;two&quot;<br>127.0.0.1:6379&gt; lindex list 1<br>&quot;one&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">获取list的长度</span><br>127.0.0.1:6379&gt; LPUSH list one<br>(integer) 1<br>127.0.0.1:6379&gt; LPUSH list two<br>(integer) 2<br>127.0.0.1:6379&gt; LPUSH list three<br>(integer) 3<br>127.0.0.1:6379&gt; llen list<br>(integer) 3<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">移除指定list中的值</span><br>127.0.0.1:6379&gt; LPUSH list three			#再添加一个three<br>(integer) 4<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;three&quot;<br>3) &quot;two&quot;<br>4) &quot;one&quot;<br>127.0.0.1:6379&gt; lrem list 1 one				#删除一个key为list的集合中值为one的元素<br>(integer) 1<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;three&quot;<br>3) &quot;two&quot;<br>127.0.0.1:6379&gt; lrem list 2 two				#删除两个key为list的集合中值为two的元素<br>(integer) 1<br>127.0.0.1:6379&gt; lrem list 2 two			#list只有一个two，删除两个，和删除一个的命令效果一样<br>(integer) 0<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>1) &quot;three&quot;<br>2) &quot;three&quot;<br>127.0.0.1:6379&gt; lrem list 2 three			##删除两个key为list的集合中值为three的元素<br>(integer) 2<br>127.0.0.1:6379&gt; LRANGE list 0 -1<br>(empty list or set)<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">根据下标截取指定的list中的value，闭区间</span><br>127.0.0.1:6379&gt; RPUSH mylist helllo1<br>(integer) 1<br>127.0.0.1:6379&gt; RPUSH mylist helllo2<br>(integer) 2<br>127.0.0.1:6379&gt; RPUSH mylist helllo3<br>(integer) 3<br>127.0.0.1:6379&gt; RPUSH mylist helllo4<br>(integer) 4<br>127.0.0.1:6379&gt; LTRIM mylist 1 2		#截取第1个到第2个元素，list已经被修改<br>OK<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) &quot;helllo2&quot;<br>2) &quot;helllo3&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">移除列表最后一个元素（从左到右），并将这个元素移到一个新的list中</span><br>127.0.0.1:6379&gt; LRANGE mylist 0 -1		<br>1) &quot;one&quot;<br>2) &quot;two&quot;<br>3) &quot;three&quot;<br>127.0.0.1:6379&gt; RPOPLPUSH mylist mynewlist<br>&quot;three&quot;<br>127.0.0.1:6379&gt; keys *		#创建了名为mynewlist的新list<br>1) &quot;mynewlist&quot;<br>2) &quot;mylist&quot;<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1		#查看原来的list<br>1) &quot;one&quot;<br>2) &quot;two&quot;<br>127.0.0.1:6379&gt; LRANGE mynewlist 0 -1		#查看新的list<br>1) &quot;three&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">根据下标更新指定list中的值</span><br>127.0.0.1:6379&gt; EXISTS mylist			#查看是否存在指定的list<br>(integer) 0<br>127.0.0.1:6379&gt; LSET mylist 0 newvalue	#如果不存在执行lset就会报错<br>(error) ERR no such key<br>127.0.0.1:6379&gt; LPUSH mylist value1		#先往list中添加元素<br>(integer) 1<br>127.0.0.1:6379&gt; LPUSH mylist value2<br>(integer) 2<br>127.0.0.1:6379&gt; LSET mylist 0 newvalue1	#修改第0个元素的值，newvalue<br>OK<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1		#查看list所有的值<br>1) &quot;newvalue1&quot;<br>2) &quot;value1&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">在指定的list中的指定value前面或是后面插入一个值</span><br>127.0.0.1:6379&gt; RPUSH mylist hello<br>(integer) 1<br>127.0.0.1:6379&gt; RPUSH mylist world<br>(integer) 2<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) &quot;hello&quot;<br>2) &quot;world&quot;<br>127.0.0.1:6379&gt; LINSERT mylist before world my #在“world”前面添加一个值，my<br>(integer) 3<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) &quot;hello&quot;<br>2) &quot;my&quot;<br>3) &quot;world&quot;<br>127.0.0.1:6379&gt; LINSERT mylist after  hello &quot;welcome to&quot; 	#在“hello”后面添加一个值<br>(integer) 4<br>127.0.0.1:6379&gt; LRANGE mylist 0 -1<br>1) &quot;hello&quot;<br>2) &quot;welcome to&quot;<br>3) &quot;my&quot;<br>4) &quot;world&quot;<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>小结</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>lpush key value [value …]</td>
<td>从左边依次往list中存放元素</td>
</tr>
<tr>
<td>rpush key value [value …]</td>
<td>从右边依次往list中存放元素</td>
</tr>
<tr>
<td>lrange key start stop</td>
<td>根据索引范围获取list中对应的元素</td>
</tr>
<tr>
<td>lpop key</td>
<td>删除最左边的一个元素</td>
</tr>
<tr>
<td>rpop</td>
<td>删除最右边的一个元素</td>
</tr>
<tr>
<td>lindex key index</td>
<td>根据下标获取元素</td>
</tr>
<tr>
<td>llen key</td>
<td>获取list长度</td>
</tr>
<tr>
<td>lrem key count value</td>
<td>删除指定list中的值，count表示删除的数量</td>
</tr>
<tr>
<td>ltrim key start stop</td>
<td>根据索引范围截取指定的list中的值，原来的list修改</td>
</tr>
<tr>
<td>RPOPLPUSH source destination</td>
<td>移除列表最后一个元素（从左到右），并将这个元素移到一个新的list中</td>
</tr>
<tr>
<td>LSET key index value</td>
<td>根据下标更新指定list中的值</td>
</tr>
<tr>
<td>linsert key before|after pivot value</td>
<td>在指定的list中的指定value前面或是后面插入一个值</td>
</tr>
</tbody></table>
<h2 id="set"><a href="#set" class="headerlink" title="set"></a>set</h2><p>set中的值不能重复</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; sadd myset hello			#set集合中添加元素<br>(integer) 1<br>127.0.0.1:6379&gt; sadd myset world<br>(integer) 1<br>127.0.0.1:6379&gt; SMEMBERS myset				#查看set的所有元素<br>1) &quot;world&quot;<br>2) &quot;hello&quot;<br>127.0.0.1:6379&gt; SISMEMBER myset hello		#判断set中是否存在某个元素<br>(integer) 1<br>127.0.0.1:6379&gt; SISMEMBER myset wesker<br>(integer) 0<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">获取指定<span class="hljs-built_in">set</span>的元素个数</span><br>127.0.0.1:6379&gt; SCARD myset<br>(integer) 2<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">删除指定<span class="hljs-built_in">set</span>中的元素</span><br>127.0.0.1:6379&gt; SREM myset hello<br>(integer) 1<br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;world&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">随机获取<span class="hljs-built_in">set</span>中的元素，默认一个</span><br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;world&quot;<br>2) &quot;hello&quot;<br>3) &quot;wesker&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;wesker&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;world&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;hello&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;wesker&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset<br>&quot;wesker&quot;<br>127.0.0.1:6379&gt; SRANDMEMBER myset 2		#指定随机获取两个元素<br>1) &quot;world&quot;<br>2) &quot;hello&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">删除指定的元素，随机删除</span><br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;world&quot;<br>2) &quot;hello&quot;<br>3) &quot;wesker&quot;<br>127.0.0.1:6379&gt; SPOP myset<br>&quot;wesker&quot;<br>127.0.0.1:6379&gt; SPOP myset<br>&quot;world&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">将一个指定的值移动到另一个<span class="hljs-built_in">set</span>集合中</span><br>127.0.0.1:6379&gt; sadd myset world wesker tom	#同时添加多个元素<br>(integer) 3<br>127.0.0.1:6379&gt; SMEMBERS myset<br>1) &quot;world&quot;<br>2) &quot;tom&quot;<br>3) &quot;hello&quot;<br>4) &quot;wesker&quot;<br>127.0.0.1:6379&gt; sadd mynewset newset	#新增一个新的set，并添加一个元素newset<br>(integer) 1<br>127.0.0.1:6379&gt; SMOVE myset mynewset wesker	#将一个指定的值移动到另一个set集合中<br>(integer) 1<br>127.0.0.1:6379&gt; SMEMBERS mynewset<br>1) &quot;newset&quot;<br>2) &quot;wesker&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">差集，交集，并集</span><br>127.0.0.1:6379&gt; SMEMBERS set1<br>1) &quot;c&quot;<br>2) &quot;d&quot;<br>3) &quot;b&quot;<br>4) &quot;a&quot;<br>127.0.0.1:6379&gt; SMEMBERS set2<br>1) &quot;d&quot;<br>2) &quot;e&quot;<br>3) &quot;b&quot;<br>127.0.0.1:6379&gt; SDIFF set1 set2			#取差集<br>1) &quot;c&quot;<br>2) &quot;a&quot;<br>127.0.0.1:6379&gt; SINTER set1 set2		#取交集<br>1) &quot;d&quot;<br>2) &quot;b&quot;<br>127.0.0.1:6379&gt; SUNION set1 set2		#取并集<br>1) &quot;b&quot;<br>2) &quot;a&quot;<br>3) &quot;e&quot;<br>4) &quot;c&quot;<br>5) &quot;d&quot;<br></code></pre></td></tr></table></figure>

<h2 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h2><p>hash里面存的也是value，只是value对应的是map集合，key-map，本质和string没有太大区别</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; hset myhash key1 value1	#创建名为myhash的hash，添加一个键值对<br>(integer) 1<br>127.0.0.1:6379&gt; hget myhash key1<br>&quot;value1&quot;<br>127.0.0.1:6379&gt; hset myhash key2 value2<br>(integer) 1<br>127.0.0.1:6379&gt; hset myhash key3 value3<br>(integer) 1<br>127.0.0.1:6379&gt; hmset myhash key4 value4 key5 value5 key6 value6	#往hash里添加多个键值对<br>OK<br>127.0.0.1:6379&gt; hmget myhash key4 key5		#获取指定hash中的多个key指定的value<br>1) &quot;value4&quot;<br>2) &quot;value5&quot;<br>127.0.0.1:6379&gt; hgetall myhash			#获取指定hash的所有key和value<br> 1) &quot;key1&quot;<br> 2) &quot;value1&quot;<br> 3) &quot;key2&quot;<br> 4) &quot;value2&quot;<br> 5) &quot;key3&quot;<br> 6) &quot;value3&quot;<br> 7) &quot;key4&quot;<br> 8) &quot;value4&quot;<br> 9) &quot;key5&quot;<br>10) &quot;value5&quot;<br>11) &quot;key6&quot;<br>12) &quot;value6&quot;<br>127.0.0.1:6379&gt; hdel myhash key1 key2	#删除指定hash内的键值对，也删除了对应的value<br>(integer) 2<br>127.0.0.1:6379&gt; hgetall myhash<br>1) &quot;key3&quot;<br>2) &quot;value3&quot;<br>3) &quot;key4&quot;<br>4) &quot;value4&quot;<br>5) &quot;key5&quot;<br>6) &quot;value5&quot;<br>7) &quot;key6&quot;<br>8) &quot;value6&quot;<br>127.0.0.1:6379&gt; HLEN myhash			#获取指定hash的长度<br>(integer) 4<br>127.0.0.1:6379&gt; HEXISTS myhash key3		#判断是否存在某个值<br>(integer) 1<br>127.0.0.1:6379&gt; HEXISTS myhash key1<br>(integer) 0<br>127.0.0.1:6379&gt; hkeys myhash	#根据hash的key查询该hash内的所有字段（map里面的key）<br>1) &quot;field1&quot;<br>2) &quot;field2&quot;<br>3) &quot;field3&quot;<br>127.0.0.1:6379&gt; hvals myhash	#根据hash的key查询该hash内的所有value<br>1) &quot;value1&quot;<br>2) &quot;value2&quot;<br>3) &quot;value3&quot;<br><br><br><br>127.0.0.1:6379&gt; hset myhash field 3<br>(integer) 1<br>127.0.0.1:6379&gt; HINCRBY myhash field 1		#自增<br>(integer) 4<br>127.0.0.1:6379&gt; HINCRBY myhash field 2<br>(integer) 6<br>127.0.0.1:6379&gt; HINCRBY myhash field 1<br>(integer) 7<br>127.0.0.1:6379&gt; HINCRBY myhash field -1<br>(integer) 6<br>127.0.0.1:6379&gt; hsetnx myhash field1 value2		#如果不存在则可以设置<br>(integer) 1<br>127.0.0.1:6379&gt; hsetnx myhash field value2		#如果存在则可以设置<br>(integer) 0<br><br></code></pre></td></tr></table></figure>

<h2 id="zset"><a href="#zset" class="headerlink" title="zset"></a>zset</h2><p>有序集合，在set的集合上，增加了一个值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6379&gt; zadd myzset 1 one				#添加一个一个值<br>(integer) 1<br>127.0.0.1:6379&gt; zadd myzset 2 two 3 three		#添加多个值<br>(integer) 2<br>127.0.0.1:6379&gt; ZRANGE myzset 0 -1<br>1) &quot;one&quot;<br>2) &quot;two&quot;<br>3) &quot;three&quot;<br><br><br><br>127.0.0.1:6379&gt; zadd salary 5000 wekser		#添加三个值<br>(integer) 1<br>127.0.0.1:6379&gt; zadd salary 5100 tom<br>(integer) 1<br>127.0.0.1:6379&gt; zadd salary 4800 kitty<br>(integer) 1<br>127.0.0.1:6379&gt; zadd salary 5100 bob<br>(integer) 1<br>127.0.0.1:6379&gt; ZRANGE salary 0 -1		#显示所有用户<br>1) &quot;kitty&quot;<br>2) &quot;wekser&quot;<br>3) &quot;bob&quot;<br>4) &quot;tom&quot;<br><br>127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf +inf		#显示从小到大<br>1) &quot;kitty&quot;<br>2) &quot;wekser&quot;<br>3) &quot;bob&quot;<br>4) &quot;tom&quot;<br><br>127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf +inf withscores	#显示从小到大，带score<br>1) &quot;kitty&quot;<br>2) &quot;4800&quot;<br>3) &quot;wekser&quot;<br>4) &quot;5000&quot;<br>5) &quot;bob&quot;<br>6) &quot;5100&quot;<br>7) &quot;tom&quot;<br>8) &quot;5100&quot;<br>127.0.0.1:6379&gt; ZREVRANGE salary 0 -1 withscores		#显示从小到大，带score<br>1) &quot;tom&quot;<br>2) &quot;5100&quot;<br>3) &quot;bob&quot;<br>4) &quot;5100&quot;<br>5) &quot;wekser&quot;<br>6) &quot;5000&quot;<br><br>127.0.0.1:6379&gt; ZRANGEBYSCORE salary -inf 5000  withscores#查询5000以下的值，包括5000，升序排列<br>1) &quot;kitty&quot;<br>2) &quot;4800&quot;<br>3) &quot;wekser&quot;<br>4) &quot;5000&quot;<br><br><br>127.0.0.1:6379&gt; zrange salary 0 -1<br>1) &quot;kitty&quot;<br>2) &quot;wekser&quot;<br>3) &quot;bob&quot;<br>4) &quot;tom&quot;<br>127.0.0.1:6379&gt; zrem salary kitty		#移除一个元素<br>(integer) 1<br>127.0.0.1:6379&gt; zrange salary 0 -1<br>1) &quot;wekser&quot;<br>2) &quot;bob&quot;<br>3) &quot;tom&quot;<br>127.0.0.1:6379&gt; ZCARD salary		#获取有序集合中的个数<br>(integer) 3<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">获取指定区间的成员数量</span><br>127.0.0.1:6379&gt; zadd zset1 1 hello 2 wesker 3 world<br>(integer) 3<br>127.0.0.1:6379&gt; ZRANGE zset1 0 -1<br>1) &quot;hello&quot;<br>2) &quot;wesker&quot;<br>3) &quot;world&quot;<br>127.0.0.1:6379&gt; ZCOUNT zset1 1 3	#获取指定区间的成员数量<br>(integer) 3<br><br></code></pre></td></tr></table></figure>

<h1 id="三种特殊数据类型"><a href="#三种特殊数据类型" class="headerlink" title="三种特殊数据类型"></a>三种特殊数据类型</h1> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
    
      <a href="/2022/06/20/mysql%E5%87%BA%E7%8E%B02059/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">mysql出现2059</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "ro9ik0ujr5xEuCjVNSOaDGX0-gzGzoHsz",
    app_key: "5TUjb1R3rddvH9AXsn1OAIDP",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2022
        <i class="ri-heart-fill heart_icon"></i> wesker
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/wei.ico" alt="wesker&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>